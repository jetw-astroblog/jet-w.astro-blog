<!DOCTYPE html><html lang="zh-CN" data-astro-cid-dk7uzq5k> <head><meta charset="UTF-8"><meta name="description" content="展示 ECharts 图表在幻灯片中的使用"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v5.16.15"><title>ECharts 图表演示 | My Astro Blog</title><!-- Open Graph --><meta property="og:type" content="article"><meta property="og:title" content="ECharts 图表演示 | My Astro Blog"><meta property="og:description" content="展示 ECharts 图表在幻灯片中的使用"><!-- Reveal.js CSS --><link rel="stylesheet" href="/slides/reveal.css"><link rel="stylesheet" href="/slides/theme/black.css" id="theme"><!-- Reveal.js 代码高亮主题 --><link rel="stylesheet" href="/slides/plugin/highlight/monokai.css"><!-- KaTeX for math --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"><!-- Mermaid 和 ECharts 在幻灯片中的样式 --><style>.slides-back-btn{position:fixed;top:20px;left:20px;z-index:100;display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:#00000080;border-radius:50%;color:#fff;text-decoration:none;opacity:.6;transition:opacity .3s,transform .3s}.slides-back-btn:hover{opacity:1;transform:scale(1.1)}.reveal{font-family:Source Sans Pro,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.reveal pre{width:100%;max-width:100%;box-shadow:0 4px 6px #0000004d}.reveal pre code{max-height:500px;padding:1em;font-size:.9em;line-height:1.5}.reveal table{margin:1em auto;border-collapse:collapse}.reveal table th,.reveal table td{padding:.5em 1em;border:1px solid rgba(255,255,255,.3)}.reveal table th{background:#ffffff1a;font-weight:700}.reveal ul,.reveal ol{text-align:left;display:inline-block}.reveal li{margin:.5em 0}.reveal a{text-decoration:underline;text-decoration-style:dotted}.reveal a:hover{text-decoration-style:solid}.reveal blockquote{width:90%;padding:1em;font-style:italic;background:#ffffff0d;border-left:4px solid currentColor;text-align:left}.reveal .columns{display:flex;gap:2em}.reveal .columns>*{flex:1}.reveal .slides section{transition:all .4s ease}.reveal.overview .slides section.present{outline:4px solid #42affa!important;outline-offset:4px;box-shadow:0 0 30px #42affa99,0 0 60px #42affa4d!important}.reveal.overview .slides section:not(.present){opacity:.6}.reveal.overview .slides section:not(.present):hover{opacity:.9}.reveal .progress{height:4px}.reveal .controls{bottom:30px}.reveal .speaker-notes-link{position:fixed;bottom:20px;right:20px;z-index:100;padding:8px 16px;background:#0009;color:#fff;border-radius:4px;font-size:12px;opacity:.4;transition:opacity .3s}.reveal .speaker-notes-link:hover{opacity:1}.reveal .mermaid{background:#fffffff2;padding:1em;border-radius:8px}.reveal .katex{font-size:1.1em}.reveal .katex-display{margin:1em 0}.reveal .fragment.fade-in-then-out{opacity:0;visibility:hidden}.reveal .fragment.fade-in-then-out.visible,.reveal .fragment.fade-in-then-out.current-fragment{opacity:1;visibility:visible}.reveal .highlight{background:linear-gradient(120deg,#ffff004d 0% 100%);padding:.1em .3em;border-radius:3px}@media(max-width:768px){.slides-back-btn{width:36px;height:36px;top:10px;left:10px}.reveal pre code{font-size:.7em}.reveal h1{font-size:1.8em}.reveal h2{font-size:1.4em}}@media print{.slides-back-btn{display:none}}.reveal[data-astro-cid-dk7uzq5k] .mermaid[data-astro-cid-dk7uzq5k]{background:#fffffff2;padding:1em;border-radius:8px}.reveal[data-astro-cid-dk7uzq5k] .echarts-container[data-astro-cid-dk7uzq5k]{width:100%;height:400px;margin:0 auto}.reveal[data-astro-cid-dk7uzq5k] pre[data-astro-cid-dk7uzq5k] code[data-astro-cid-dk7uzq5k].language-mermaid,.reveal[data-astro-cid-dk7uzq5k] pre[data-astro-cid-dk7uzq5k] code[data-astro-cid-dk7uzq5k].language-echarts{display:none}
.line-clamp-1[data-v-402cd04c]{display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden}
</style></head> <body data-astro-cid-dk7uzq5k> <div class="reveal" data-astro-cid-dk7uzq5k> <div class="slides" data-astro-cid-dk7uzq5k> <section> <section data-markdown> <textarea data-template>## ECharts 图表

在幻灯片中使用 ECharts 创建交互式图表
</textarea> </section> </section><section> <section data-markdown> <textarea data-template>
## 折线图

```echarts
{
  &quot;xAxis&quot;: {
    &quot;type&quot;: &quot;category&quot;,
    &quot;data&quot;: [&quot;Mon&quot;, &quot;Tue&quot;, &quot;Wed&quot;, &quot;Thu&quot;, &quot;Fri&quot;, &quot;Sat&quot;, &quot;Sun&quot;]
  },
  &quot;yAxis&quot;: {
    &quot;type&quot;: &quot;value&quot;
  },
  &quot;series&quot;: [{
    &quot;data&quot;: [150, 230, 224, 218, 135, 147, 260],
    &quot;type&quot;: &quot;line&quot;,
    &quot;smooth&quot;: true
  }]
}
```
</textarea> </section> </section><section> <section data-markdown> <textarea data-template>
## 柱状图

```echarts
{
  &quot;xAxis&quot;: {
    &quot;type&quot;: &quot;category&quot;,
    &quot;data&quot;: [&quot;产品A&quot;, &quot;产品B&quot;, &quot;产品C&quot;, &quot;产品D&quot;, &quot;产品E&quot;]
  },
  &quot;yAxis&quot;: {
    &quot;type&quot;: &quot;value&quot;
  },
  &quot;series&quot;: [{
    &quot;data&quot;: [120, 200, 150, 80, 70],
    &quot;type&quot;: &quot;bar&quot;,
    &quot;itemStyle&quot;: {
      &quot;color&quot;: &quot;#5470c6&quot;
    }
  }]
}
```
</textarea> </section> </section><section> <section data-markdown> <textarea data-template>
## 饼图

```echarts
{
  &quot;series&quot;: [{
    &quot;type&quot;: &quot;pie&quot;,
    &quot;radius&quot;: &quot;60%&quot;,
    &quot;data&quot;: [
      {&quot;value&quot;: 1048, &quot;name&quot;: &quot;搜索引擎&quot;},
      {&quot;value&quot;: 735, &quot;name&quot;: &quot;直接访问&quot;},
      {&quot;value&quot;: 580, &quot;name&quot;: &quot;邮件营销&quot;},
      {&quot;value&quot;: 484, &quot;name&quot;: &quot;联盟广告&quot;},
      {&quot;value&quot;: 300, &quot;name&quot;: &quot;视频广告&quot;}
    ]
  }]
}
```
</textarea> </section> </section><section> <section data-markdown> <textarea data-template>
## 雷达图

```echarts
{
  &quot;radar&quot;: {
    &quot;indicator&quot;: [
      {&quot;name&quot;: &quot;销售&quot;, &quot;max&quot;: 6500},
      {&quot;name&quot;: &quot;管理&quot;, &quot;max&quot;: 16000},
      {&quot;name&quot;: &quot;技术&quot;, &quot;max&quot;: 30000},
      {&quot;name&quot;: &quot;客服&quot;, &quot;max&quot;: 38000},
      {&quot;name&quot;: &quot;研发&quot;, &quot;max&quot;: 52000},
      {&quot;name&quot;: &quot;市场&quot;, &quot;max&quot;: 25000}
    ]
  },
  &quot;series&quot;: [{
    &quot;type&quot;: &quot;radar&quot;,
    &quot;data&quot;: [{
      &quot;value&quot;: [4200, 3000, 20000, 35000, 50000, 18000],
      &quot;name&quot;: &quot;预算&quot;
    }, {
      &quot;value&quot;: [5000, 14000, 28000, 26000, 42000, 21000],
      &quot;name&quot;: &quot;实际&quot;
    }]
  }]
}
```
</textarea> </section> </section><section> <section data-markdown> <textarea data-template>
## 散点图

```echarts
{
  &quot;xAxis&quot;: {},
  &quot;yAxis&quot;: {},
  &quot;series&quot;: [{
    &quot;symbolSize&quot;: 20,
    &quot;data&quot;: [
      [10, 8.04], [8, 6.95], [13, 7.58], [9, 8.81],
      [11, 8.33], [14, 9.96], [6, 7.24], [4, 4.26],
      [12, 10.84], [7, 4.82], [5, 5.68]
    ],
    &quot;type&quot;: &quot;scatter&quot;
  }]
}
```
</textarea> </section> </section><section> <section data-markdown> <textarea data-template>
## 仪表盘

```echarts
{
  &quot;series&quot;: [{
    &quot;type&quot;: &quot;gauge&quot;,
    &quot;detail&quot;: {&quot;formatter&quot;: &quot;{value}%&quot;},
    &quot;data&quot;: [{&quot;value&quot;: 75, &quot;name&quot;: &quot;完成率&quot;}]
  }]
}
```</textarea> </section> </section> </div> </div> <!-- 返回按钮（仅在独立页面显示，嵌入模式通过 JS 隐藏） --> <a href="#" class="slides-back-btn" id="slides-back-btn" title="返回上一级" data-astro-cid-dk7uzq5k> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-dk7uzq5k> <path d="M19 12H5M12 19l-7-7 7-7" data-astro-cid-dk7uzq5k></path> </svg> </a> <!-- 检测嵌入模式并隐藏返回按钮，设置返回链接为父路径 --> <script>
      (function() {
        var btn = document.getElementById('slides-back-btn');
        if (!btn) return;

        // 检查是否在 iframe 中或 URL 包含 embed=true
        var isEmbed = window.self !== window.top ||
                      window.location.search.indexOf('embed=true') !== -1;
        if (isEmbed) {
          btn.style.display = 'none';
          return;
        }

        // 设置返回链接为父路径
        var path = window.location.pathname;
        // 移除末尾的斜杠
        if (path.endsWith('/')) {
          path = path.slice(0, -1);
        }
        // 获取父路径
        var parentPath = path.substring(0, path.lastIndexOf('/'));
        // 如果父路径为空，返回首页
        btn.href = parentPath || '/';
      })();
    </script> <!-- Reveal.js --> <script src="/slides/reveal.js"></script> <script src="/slides/plugin/markdown/markdown.js"></script> <script src="/slides/plugin/highlight/highlight.js"></script> <script src="/slides/plugin/notes/notes.js"></script> <script src="/slides/plugin/math/math.js"></script> <!-- Mermaid --> <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script> <!-- ECharts --> <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script> <!-- 初始化 Reveal.js --> <script>(function(){const revealConfig = "{\"hash\":true,\"controls\":true,\"progress\":true,\"center\":true,\"transition\":\"slide\",\"slideNumber\":true,\"markdown\":{\"smartypants\":true},\"plugins\":[\"RevealMarkdown\",\"RevealHighlight\",\"RevealNotes\",\"RevealMath\"]}";

      document.addEventListener('DOMContentLoaded', function() {
        const config = JSON.parse(revealConfig);

        Reveal.initialize({
          hash: config.hash,
          controls: config.controls,
          progress: config.progress,
          center: config.center,
          transition: config.transition,
          slideNumber: config.slideNumber,

          // Markdown 配置
          markdown: config.markdown,

          // 数学公式配置
          math: {
            mathjax: null,
            katex: 'https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js',
            katexScript: 'https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js',
          },

          // 插件
          plugins: [RevealMarkdown, RevealHighlight, RevealNotes, RevealMath.KaTeX]
        }).then(function() {
          // Reveal.js 初始化完成后，渲染 Mermaid 和 ECharts
          var mermaidContainers = [];
          var echartsInstances = [];

          // 初始化 Mermaid
          if (typeof mermaid !== 'undefined') {
            mermaid.initialize({
              startOnLoad: false,
              theme: 'default',
              securityLevel: 'loose'
            });

            // 查找所有 mermaid 代码块并准备容器
            document.querySelectorAll('pre code.language-mermaid, pre code.mermaid').forEach(function(block, index) {
              var code = block.textContent;
              var container = document.createElement('div');
              container.className = 'mermaid';
              container.id = 'mermaid-slide-' + index;
              container.setAttribute('data-mermaid-code', code);
              container.style.minHeight = '100px';

              // 替换代码块
              var pre = block.parentElement;
              pre.parentElement.insertBefore(container, pre);
              pre.style.display = 'none';

              mermaidContainers.push({
                container: container,
                code: code,
                rendered: false
              });
            });

            // 渲染当前可见幻灯片中的 Mermaid
            async function renderVisibleMermaid() {
              var needsLayout = false;

              mermaidContainers.forEach(function(item) {
                if (item.rendered) return;

                var section = item.container.closest('section');
                if (section && (section.classList.contains('present') || section.closest('.present'))) {
                  item.container.textContent = item.code;
                  item.rendered = true;
                  needsLayout = true;
                }
              });

              // 渲染所有已标记的 Mermaid
              var toRender = mermaidContainers.filter(function(item) {
                return item.rendered && item.container.textContent;
              }).map(function(item) {
                return item.container;
              });

              if (toRender.length > 0) {
                try {
                  await mermaid.run({ nodes: toRender });
                  // Mermaid 渲染完成后，通知 Reveal.js 重新计算布局
                  if (needsLayout) {
                    Reveal.layout();
                  }
                } catch(e) {
                  console.warn('Mermaid render warning:', e);
                }
              }
            }

            // 初始渲染 - 使用更长的延迟确保 Reveal.js 完全初始化
            setTimeout(renderVisibleMermaid, 200);

            // 幻灯片切换时渲染
            Reveal.on('slidechanged', function() {
              setTimeout(renderVisibleMermaid, 50);
            });
          }

          // 初始化 ECharts
          if (typeof echarts !== 'undefined') {
            document.querySelectorAll('pre code.language-echarts, pre code.echarts').forEach(function(block, index) {
              try {
                var code = block.textContent.trim();
                var option = JSON.parse(code);

                // 创建 ECharts 容器
                var container = document.createElement('div');
                container.className = 'echarts-container';
                container.id = 'echarts-slide-' + index;
                container.style.height = '400px';
                container.style.width = '100%';

                // 替换代码块
                var pre = block.parentElement;
                pre.parentElement.insertBefore(container, pre);
                pre.style.display = 'none';

                echartsInstances.push({
                  container: container,
                  option: option,
                  chart: null,
                  initialized: false
                });
              } catch (e) {
                console.error('ECharts parsing error:', e);
              }
            });

            // 渲染当前可见幻灯片中的 ECharts
            function renderVisibleEcharts() {
              echartsInstances.forEach(function(item) {
                var section = item.container.closest('section');
                var isVisible = section && (section.classList.contains('present') || section.closest('.present'));

                if (isVisible) {
                  if (!item.initialized) {
                    item.chart = echarts.init(item.container);
                    item.chart.setOption(item.option);
                    item.initialized = true;
                  } else if (item.chart) {
                    item.chart.resize();
                  }
                }
              });
            }

            // 初始渲染
            setTimeout(renderVisibleEcharts, 100);

            // 幻灯片切换时渲染/调整大小
            Reveal.on('slidechanged', function() {
              setTimeout(renderVisibleEcharts, 50);
            });

            // 监听窗口大小变化
            window.addEventListener('resize', function() {
              echartsInstances.forEach(function(item) {
                if (item.chart) {
                  item.chart.resize();
                }
              });
            });
          }

        });
      });
    })();</script> </body> </html>